<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Proc">
	<select id="getProcList" parameterType="hashmap" resultType="hashmap">
		SELECT PR.PROC_NO, TO_CHAR(PR.PROC_DATE, 'YY/MM/DD') AS PROC_DATE , CT.CT_NM, CC.CODE_NAME, E.EMP_NM, PR.PROC_MONEY_TYPE, PR.PROC_MONEY, PT.PT_SAVE, PT.PT_DD
		FROM PROCEDURE PR INNER JOIN CUSTOMER CT
		                          ON PR.CT_NO = CT.CT_NO
		                  INNER JOIN COMMON_CODE CC
		                          ON PR.PROC_SG_NO = CC.CODE_S_CATE
		                          AND PR.PROC_BG_NO = CC.CODE_M_CATE
		                          AND CC.CODE_L_CATE = 2
		                  INNER JOIN EMPLOYEE E
		                          ON PR.EMP_NO = E.EMP_NO
		                  INNER JOIN POINT PT
		                          ON PR.PT_NO = PT.PT_NO
	</select>
	<select id="getProcMCate" resultType="hashmap">
		SELECT CC.CODE_L_CATE, CC.CODE_M_CATE, CC.CODE_S_CATE, CC.CODE_NAME
		FROM COMMON_CODE CC
		WHERE CODE_M_CATE = 2
		AND CODE_L_CATE = 0
	</select>
	<select id="getProcSCate" parameterType="hashmap" resultType="hashmap">
		SELECT CC.CODE_L_CATE, CC.CODE_M_CATE, CC.CODE_S_CATE, CC.CODE_NAME
		FROM COMMON_CODE CC
		WHERE CODE_M_CATE = #{mCate}
		AND CODE_L_CATE = 2
	</select>
</mapper>